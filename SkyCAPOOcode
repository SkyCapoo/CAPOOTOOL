Max_version = 1.0 --最新的版本
announcement = "這個輔助更新了基礎的功能 2024/8/28"
CETrainer_CEMemo1.Lines.Text = announcement--公告
PROCESS_NAME = 'MiniGameApp.exe'
if not openProcess(PROCESS_NAME) then
    messageDialog("错误: 无法找到应用程序，请重新打开", mtError)
    closeCE()
    return
end
local PROCESS_NAME = 'MiniGameApp.exe'
local function getHostname()
    local handle = io.popen("hostname")
    if handle then
        local hostname = handle:read("*l")
        handle:close()
        return hostname:match("^%s*(.-)%s*$")
    else
        showMessage("错误: 无法获取计算机名!")
        closeCE()
        return nil
    end
end

local function isHostnameVip(hostname)--主機判斷
    local vipHostnames = {
        "LAPTOP-2QC5QJ83", "DESKTOP-E8IELO5", "ACER-Windows11", "DESKTOP-40AHL7Q", "DESKTOP-FISCPB3"
    }
    for _, vipHostname in ipairs(vipHostnames) do
        if hostname == vipHostname then
            return true
        end
    end
    return false
end

local hostname = getHostname()

if hostname then
    isVip = isHostnameVip(hostname)

    if isVip then

    else
        messageDialog("错误: 主机名不被允许", mtError)
        closeCE()
    end
else
    -- 如果无法获取主机名
    messageDialog("错误: 无法获取计算机名!", mtError)
    closeCE()
end

local miniuid = readInteger("[[libiworld.g_nHomeGardenSaveVersion+424]+C]+0")

if miniuid == nil then
    messageDialog("错误: 无法读取内存，必须进入您的账户以检查玩家ID", mtError)
    closeCE()
    return
end

-- VIP UID 列表
local vipUIDs = {1088712050, 1089142268, 1251995024, 1300614537, 1277719384}--玩家uid判斷
local isVipUID = false

for i = 1, #vipUIDs do
    if miniuid == vipUIDs[i] then
        isVipUID = true
        break
    end
end

if isVipUID then
elseif isVip then
else
    messageDialog("错误: 玩家ID不正确!", mtError)
    closeCE()
end
function CETrainer_CECustomButton2Click(sender)
if CETrainer_CECheckbox1.Checked == true then
CETrainer.hide()
UDF2.show()
UDF2_CEMemo1.Lines.Text = announcement --綫上公告
--連接游戲
function GameInject(exe)
    local game = exe
    local processID = getProcessIDFromProcessName(game)
    if processID ~= nil then
        openProcess(game)
    else
        showMessage("進程不存在，請重新打開游戲再嘗試")
    end
end
GameInject("MiniGameApp.exe")
myuid = readInteger("[[libiworld.g_nHomeGardenSaveVersion+424]+0C]+0")
hostuid = readInteger("[libSandboxEngine.g_WorldMgr]+8C")
pingg = readInteger("libSandboxEngine.RoomSyncResMgr::s_pInstance+32C")
fpss = readFloat("[libMiniBaseEngine.dll+91f120]+2C")
fps = string.format("%.1f", fpss)
UDF2_CEMemo1.Lines.Text = announcement
UDF2_CELabel1.Caption = "UID:  " .. myuid
UDF2_CELabel2.Caption = "房主UID:  " .. hostuid
UDF2_CELabel3.Caption = "Ping:  " .. pingg
UDF2_CELabel4.Caption = "FPS:  " .. fps
else
showMessage("請先閲讀[用戶使用協議]")
end
end

function UDF2_CEButton1Click(sender)
myuid = readInteger("[[libiworld.g_nHomeGardenSaveVersion+424]+0C]+0")
hostuid = readInteger("[libSandboxEngine.g_WorldMgr]+8C")
pingg = readInteger("libSandboxEngine.RoomSyncResMgr::s_pInstance+32C")
fpss = readFloat("[libMiniBaseEngine.dll+91f120]+2C")
fps = string.format("%.1f", fpss)
UDF2_CEMemo1.Lines.Text = announcement
UDF2_CELabel1.Caption = "UID:  " .. myuid
UDF2_CELabel2.Caption = "房主UID:  " .. hostuid
UDF2_CELabel3.Caption = "Ping:  " .. pingg
UDF2_CELabel4.Caption = "FPS:  " .. fps
end


function CETrainer_CECheckbox1Click(sender)
if CETrainer_CECheckbox1.Checked == true then
function showCustomMessage(title, message)
  -- 創建一個表單
  local form = createForm(false)
  form.Caption = title
  form.Width = 500
  form.Height = 130

  -- 創建一個標籤來顯示消息
  local label = createLabel(form)
  label.Caption = message
  label.Color = 0x00E9E9E9
  label.Align = 'alClient'
  label.WordWrap = true
  label.AutoSize = false
  label.Font.Size = 10
  label.Font.Name = 'Segoe UI'
  label.Font.Style = 'fsBold'
  label.Font.Color = 0x000000 -- 黑色文字

  -- 創建一個按鈕來關閉窗口
  local button = createButton(form)
  button.Caption = '確定'
  button.AnchorSideBottom.Control = form
  button.AnchorSideBottom.Side = asrBottom
  button.AnchorSideBottom.AnchorTo = 'bottom'
  button.AnchorSideRight.Control = form
  button.AnchorSideRight.Side = asrRight
  button.AnchorSideRight.AnchorTo = 'right'
  button.Top = form.Height - button.Height - 10
  button.Left = form.Width - button.Width - 10
  button.OnClick = function() form.close() end

  form.Position = 'poScreenCenter'
  form.BorderStyle = 'bsDialog'
  form.ShowModal()
end
local chatww =
[=[
1.我們的軟體安全無毒,使用過程中不能破環迷你世界正常遊戲 秩序,封號後果自負
2.本軟件僅供學習,請勿用於非法用途,違者後果自負,如有侵版倒 賣行為,請聯繫作者
]=]
showCustomMessage("用戶使用協議", chatww)
else



end
end
