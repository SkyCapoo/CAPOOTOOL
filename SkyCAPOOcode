Max_version = 1.0 --最新的版本
announcement = "這個輔助更新了基礎的功能 2024/8/28"
CETrainer_CEMemo1.Lines.Text = announcement--公告
PROCESS_NAME = 'MiniGameApp.exe'
if not openProcess(PROCESS_NAME) then
    messageDialog("错误: 无法找到应用程序，请重新打开", mtError)
    closeCE()
    return
end
local PROCESS_NAME = 'MiniGameApp.exe'
local function getHostname()
    local handle = io.popen("hostname")
    if handle then
        local hostname = handle:read("*l")
        handle:close()
        return hostname:match("^%s*(.-)%s*$")
    else
        showMessage("错误: 无法获取计算机名!")
        closeCE()
        return nil
    end
end

local function isHostnameVip(hostname)--主機判斷
    local vipHostnames = {
        "LAPTOP-2QC5QJ83", "DESKTOP-E8IELO5", "ACER-Windows11", "DESKTOP-40AHL7Q", "DESKTOP-FISCPB3"
    }
    for _, vipHostname in ipairs(vipHostnames) do
        if hostname == vipHostname then
            return true
        end
    end
    return false
end

local hostname = getHostname()

if hostname then
    isVip = isHostnameVip(hostname)

    if isVip then

    else
        messageDialog("错误: 主机名不被允许", mtError)
        closeCE()
    end
else
    -- 如果无法获取主机名
    messageDialog("错误: 无法获取计算机名!", mtError)
    closeCE()
end

local miniuid = readInteger("[[libiworld.g_nHomeGardenSaveVersion+424]+C]+0")

if miniuid == nil then
    messageDialog("错误: 无法读取内存，必须进入您的账户以检查玩家ID", mtError)
    closeCE()
    return
end

-- VIP UID 列表
local vipUIDs = {1088712050, 1089142268, 1251995024, 1300614537, 1277719384}--玩家uid判斷
local isVipUID = false

for i = 1, #vipUIDs do
    if miniuid == vipUIDs[i] then
        isVipUID = true
        break
    end
end

if isVipUID then
elseif isVip then
else
    messageDialog("错误: 玩家ID不正确!", mtError)
    closeCE()
end
function GameInject(exe)
    local game = exe
    local processID = getProcessIDFromProcessName(game)
    if processID ~= nil then
        openProcess(game)
    else
        showMessage("進程不存在，請重新打開游戲再嘗試")
    end
end

function CETrainer_CECustomButton2Click(sender)
if CETrainer_CECheckbox1.Checked == true then

--連接游戲
CETrainer_CECustomButton2.Enabled = false
GameInject("MiniGameApp.exe")
sleep(500)
CETrainer_CECustomButton2.Enabled = true
CETrainer.hide()
sleep(500)
UDF2.show()
UDF2_CEMemo1.Lines.Text = announcement --綫上公告
myuid = readInteger("[[libiworld.g_nHomeGardenSaveVersion+424]+0C]+0")
hostuid = readInteger("[libSandboxEngine.g_WorldMgr]+8C")
pingg = readInteger("libSandboxEngine.RoomSyncResMgr::s_pInstance+32C")
fpss = readFloat("[libMiniBaseEngine.dll+91f120]+2C")
fps = string.format("%.1f", fpss)
UDF2_CEMemo1.Lines.Text = announcement
UDF2_CELabel1.Caption = "UID:  " .. myuid
UDF2_CELabel2.Caption = "房主UID:  " .. hostuid
UDF2_CELabel3.Caption = "Ping:  " .. pingg
UDF2_CELabel4.Caption = "FPS:  " .. fps
else
showMessage("請先閲讀[用戶使用協議]")
end
end

function UDF2_CEButton1Click(sender)
myuid = readInteger("[[libiworld.g_nHomeGardenSaveVersion+424]+0C]+0")
hostuid = readInteger("[libSandboxEngine.g_WorldMgr]+8C")
pingg = readInteger("libSandboxEngine.RoomSyncResMgr::s_pInstance+32C")
fpss = readFloat("[libMiniBaseEngine.dll+91f120]+2C")
fps = string.format("%.1f", fpss)
UDF2_CEMemo1.Lines.Text = announcement
UDF2_CELabel1.Caption = "UID:  " .. myuid
UDF2_CELabel2.Caption = "房主UID:  " .. hostuid
UDF2_CELabel3.Caption = "Ping:  " .. pingg
UDF2_CELabel4.Caption = "FPS:  " .. fps
end


function CETrainer_CECheckbox1Click(sender)
if CETrainer_CECheckbox1.Checked == true then
function showCustomMessage(title, message)
  -- 創建一個表單
  local form = createForm(false)
  form.Caption = title
  form.Width = 500
  form.Height = 130

  -- 創建一個標籤來顯示消息
  local label = createLabel(form)
  label.Caption = message
  label.Color = 0x00E9E9E9
  label.Align = 'alClient'
  label.WordWrap = true
  label.AutoSize = false
  label.Font.Size = 10
  label.Font.Name = 'Segoe UI'
  label.Font.Style = 'fsBold'
  label.Font.Color = 0x000000 -- 黑色文字

  -- 創建一個按鈕來關閉窗口
  local button = createButton(form)
  button.Caption = '確定'
  button.AnchorSideBottom.Control = form
  button.AnchorSideBottom.Side = asrBottom
  button.AnchorSideBottom.AnchorTo = 'bottom'
  button.AnchorSideRight.Control = form
  button.AnchorSideRight.Side = asrRight
  button.AnchorSideRight.AnchorTo = 'right'
  button.Top = form.Height - button.Height - 10
  button.Left = form.Width - button.Width - 10
  button.OnClick = function() form.close() end

  form.Position = 'poScreenCenter'
  form.BorderStyle = 'bsDialog'
  form.ShowModal()
end
local chatww =
[=[
1.我們的軟體安全無毒,使用過程中不能破環迷你世界正常遊戲 秩序,封號後果自負
2.本軟件僅供學習,請勿用於非法用途,違者後果自負,如有侵版倒 賣行為,請聯繫作者
]=]
showCustomMessage("用戶使用協議", chatww)
else

end
end

function UDF2_CEButton5Click(sender)
shellExecute("https://qm.qq.com/q/cYKztfFoXe")
end

function UDF2_CEButton6Click(sender)
shellExecute("https://discord.gg/jSwyC4kHvC")
end
function UDF2_CEButton8Click(sender)
UDF2.hide()
sleep(500)
CETrainer.show()
end

function UDF2_CEButton9Click(sender)
closeCE()
return caFree
end

function UDF2_CEButton7Click(sender)
UDF2_CEMemo1.Lines.Text = announcement --綫上公告
end
--writeInteger
--writeFloat
function UDF2_CECheckbox1Click(sender)
if UDF2_CECheckbox1.Checked == true then
writeFloat("[[libSandboxEngine.g_pPlayerCtrl]+280]+98",getProperty(UDF2_CEEdit5,"text"))
else
end
end

function UDF2_CECheckbox2Click(sender)
if UDF2_CECheckbox2.Checked == true then
if Freezehp then Freezehp.destroy(); Freezehp = nil end
Freezehp = createTimer(getMainForm())
Freezehp.interval = 100
Freezehp.OnTimer = function()
writeFloat("[[libSandboxEngine.g_pPlayerCtrl]+280]+94",getProperty(UDF2_CEEdit6,"text"))
end
else
if Freezehp then Freezehp.destroy(); Freezehp = nil end
end
end

function UDF2_CECheckbox3Click(sender)
if UDF2_CECheckbox3.Checked == true then
writeFloat("[[libSandboxEngine.g_pPlayerCtrl]+280]+22c",getProperty(UDF2_CEEdit7,"text"))
else
end
end

function UDF2_CECheckbox4Click(sender)
if UDF2_CECheckbox4.Checked == true then
if Freezehunger then Freezehunger.destroy(); Freezehunger = nil end
Freezehunger = createTimer(getMainForm())
Freezehunger.interval = 100
Freezehunger.OnTimer = function()
writeFloat("[[libSandboxEngine.g_pPlayerCtrl]+280]+220",getProperty(UDF2_CEEdit8,"text"))
end
else
if Freezehunger then Freezehunger.destroy(); Freezehunger = nil end
end
end

function UDF2_CECheckbox5Click(sender)
if UDF2_CECheckbox5.Checked == true then
writeFloat("[[libSandboxEngine.g_pPlayerCtrl]+280]+288",getProperty(UDF2_CEEdit9,"text"))
else
end
end

function UDF2_CECheckbox6Click(sender)
if UDF2_CECheckbox6.Checked == true then
if Freezestr then Freezestr.destroy(); Freezestr = nil end
Freezestr = createTimer(getMainForm())
Freezestr.interval = 100
Freezestr.OnTimer = function()
writeFloat("[[libSandboxEngine.g_pPlayerCtrl]+280]+280",getProperty(UDF2_CEEdit10,"text"))
end
else
if Freezestr then Freezestr.destroy(); Freezestr = nil end
end
end

function UDF2_CECheckbox7Click(sender)
if UDF2_CECheckbox7.Checked == true then
writeFloat("[[libSandboxEngine.g_pPlayerCtrl]+280]+a8",getProperty(UDF2_CEEdit11,"text"))
else
end
end

function UDF2_CECheckbox8Click(sender)
if UDF2_CECheckbox8.Checked == true then
jfhud = readFloat("[[libSandboxEngine.g_pPlayerCtrl]+280]+14C")
writeFloat("[[libSandboxEngine.g_pPlayerCtrl]+280]+14C",getProperty(UDF2_CEEdit12,"text"))
else
writeFloat("[[libSandboxEngine.g_pPlayerCtrl]+280]+14C",jfhud)
end
end

function UDF2_CECheckbox9Click(sender)
if UDF2_CECheckbox9.Checked == true then
jattack = readFloat("[[libSandboxEngine.g_pPlayerCtrl]+280]+144")
writeFloat("[[libSandboxEngine.g_pPlayerCtrl]+280]+144",getProperty(UDF2_CEEdit13,"text"))
else
writeFloat("[[libSandboxEngine.g_pPlayerCtrl]+280]+144",jattack)
end
end

function UDF2_CECheckbox10Click(sender)
if UDF2_CECheckbox10.Checked == true then
yfhud = readFloat("[[libSandboxEngine.g_pPlayerCtrl]+280]+155")
writeFloat("[[libSandboxEngine.g_pPlayerCtrl]+280]+155",getProperty(UDF2_CEEdit14,"text"))
else
writeFloat("[[libSandboxEngine.g_pPlayerCtrl]+280]+155",yfhud)
end
end

function UDF2_CECheckbox11Click(sender)
if UDF2_CECheckbox11.Checked == true then
yattack = readFloat("[[libSandboxEngine.g_pPlayerCtrl]+280]+148")
writeFloat("[[libSandboxEngine.g_pPlayerCtrl]+280]+148",getProperty(UDF2_CEEdit15,"text"))
else
writeFloat("[[libSandboxEngine.g_pPlayerCtrl]+280]+148",yattack)
end
end

